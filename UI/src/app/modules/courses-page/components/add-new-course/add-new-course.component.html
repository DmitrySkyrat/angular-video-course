<div class="new-course">
  <form class="course-form" [formGroup]="form" (ngSubmit)="onFormSubmit()">
    <div class="container">
      <label class="course-title" for="title-id">Title:</label>
      <input class="input" id="title-id" type="text" formControlName="title" />
      <p
        class="error"
        *ngIf="
          form.get('title').hasError('required') && form.get('title').touched
        "
      >
        Title is required
      </p>
      <p class="error" *ngIf="form.get('title').errors?.maxlength">
        Title shouldn't be more then 50 symbols
      </p>
    </div>

    <div class="container">
      <label class="course-description" for="description-id"
        >Description:</label
      >
      <textarea
        class="course-description__textarea"
        id="description-id"
        formControlName="description"
      ></textarea>
      <p
        class="error"
        *ngIf="
          form.get('description').hasError('required') &&
          form.get('description').touched
        "
      >
        Description is required
      </p>
      <p class="error" *ngIf="form.get('description').errors?.maxlength">
        Description shouldn't be more then 500 symbols
      </p>
    </div>

    <div class="container">
      <app-date formControlName="date" customDate></app-date>
      <p
        class="error"
        *ngIf="
          form.get('date').hasError('required') && form.get('date').touched
        "
      >
        Date is required
      </p>
      <p class="error" *ngIf="form.get('date').errors?.customDate">
        This date is not allowed. Date format should be '00/00/0000'
      </p>
      <h1>{{ form.get("date").invalid | json }}</h1>
      <h1>{{ form.get("date").value }}</h1>
    </div>

    <div class="container">
      <app-duration formControlName="duration" appDuration></app-duration>
      <p
        class="error"
        *ngIf="
          form.get('duration').hasError('required') &&
          form.get('duration').touched
        "
      >
        Duration is required
      </p>
      <p class="error" *ngIf="form.get('duration').errors?.duration">
        Duration should only have numbers
      </p>
      <h1>{{ form.get("duration").invalid | json }}</h1>
      <h1>{{ form.get("duration").value }}</h1>
    </div>

    <div class="container">
      <app-authors
        formControlName="authors"
        [selectedAuthors]="selectedCourseAuthors"
      ></app-authors>
      <p
        class="error"
        *ngIf="
          form.get('authors').hasError('required') &&
          form.get('authors').touched
        "
      >
        Authors are required
      </p>
      <div>
        <b>Selected options: </b>
        <span
          *ngFor="let option of form.get('authors').value; let index = index"
          >{{ option.name
          }}<span *ngIf="index !== form.get('authors').value.length - 1"
            >,
          </span></span
        >
      </div>
    </div>

    <div class="container">
      <div class="course-buttons">
        <button class="button" type="submit" [disabled]="form.invalid">
          {{ !!form.value.title ? "Update" : "Save" }}
        </button>
        <button class="button button__cancel" (click)="cancel()">
          Cancel
        </button>
      </div>
    </div>
  </form>
</div>
